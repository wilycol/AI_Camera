from flask import Flask, request, jsonify\nimport numpy as np\nimport cv2\nfrom keras.models import load_model\nfrom mtcnn import MTCNN\n\napp = Flask(__name__)\n\ndetector = MTCNN()\nmodel = load_model('facenet_keras.h5')  # Ensure you have the correct path to your model\n\n@app.route('/upload', methods=['POST'])\ndef upload():\n    file = request.files['file']\n    if not file:\n        return jsonify({'error': 'No file part'}), 400\n    img = cv2.imdecode(np.fromstring(file.read(), np.uint8), cv2.IMREAD_COLOR)\n    return jsonify({'message': 'File uploaded successfully'}), 200\n\n@app.route('/predictImage', methods=['POST'])\ndef predict_image():\n    file = request.files['file']\n    if not file:\n        return jsonify({'error': 'No file part'}), 400\n    img = cv2.imdecode(np.fromstring(file.read(), np.uint8), cv2.IMREAD_COLOR)\n    face = detector.detect_faces(img)\n    if len(face) == 0:\n        return jsonify({'error': 'No face found'}), 400\n    # Process the face with FaceNet model\n    # Assuming you have preprocessing and model defined\n    return jsonify({'result': 'Face recognized'}), 200\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5000)